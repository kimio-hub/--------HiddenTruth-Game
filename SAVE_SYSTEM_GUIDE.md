# 存档系统使用指南

## 新增功能概览

### 主菜单存档管理
- **存档管理按钮**: 原"继续游戏"按钮已改为"存档管理"
- **存档预览**: 显示所有5个存档槽的状态
- **快速继续**: 直接从主菜单选择存档继续游戏
- **存档删除**: 可以在主菜单直接删除不需要的存档

### 游戏内存档系统
- **5个存档槽**: 支持多个独立的游戏进度
- **快速操作**: 
  - F5: 快速存档到槽1
  - F9: 快速读档槽1
- **存档信息**: 显示存档名称、时间、位置和进度

## 使用方法

### 1. 主菜单操作
1. 启动游戏后，点击"存档管理"按钮
2. 查看所有存档状态
3. 点击"继续游戏"加载对应存档
4. 点击"删除"移除不需要的存档

### 2. 游戏内操作
1. 按ESC或点击设置按钮打开菜单
2. 点击"存档"或"读档"按钮
3. 选择存档槽进行操作
4. 使用F5/F9进行快速存读档

### 3. 存档信息说明
- **存档名称**: 自动生成，包含房间和时间信息
- **保存时间**: 精确到分钟的时间戳
- **当前位置**: 显示角色所在房间的中文名称
- **游戏进度**: 显示当前的游戏阶段

## 技术特性

### 数据存储
- 使用localStorage本地存储
- 自动错误恢复和数据验证
- 支持存档数据的导入导出（预留功能）

### 兼容性
- 兼容原有的自动保存功能
- 向后兼容老版本存档数据
- 支持浏览器的隐私模式

### 安全性
- 存档删除需要用户确认
- 防止意外数据丢失
- 存档损坏时自动降级处理

## 故障排除

### 存档无法加载
1. 检查浏览器是否允许localStorage
2. 清除浏览器缓存后重试
3. 确认存档文件未被意外删除

### 界面显示异常
1. 刷新页面重新加载
2. 检查浏览器控制台的错误信息
3. 确认CSS文件正确加载

### 快捷键不响应
1. 确保游戏界面获得焦点
2. 检查是否有其他程序占用快捷键
3. 尝试点击游戏区域后再使用快捷键

## 开发信息

### 文件结构
```
game/
├── game.js (包含SaveManager和SaveLoadUI模块)
├── game.html (存档读档界面结构)
├── game.css (存档界面样式)
index/
├── index.html (主菜单存档管理)
└── index.css (主菜单样式)
```

### 关键模块
- **SaveManager**: 核心存档管理逻辑
- **SaveLoadUI**: 游戏内存档界面
- **MainSaveManager**: 主菜单存档管理

### 存储键值
- `HTG_SAVE_SLOTS_V1`: 多存档数据
- `HTG_SAVE_V1`: 自动保存数据（兼容）
- `HTG_PROLOGUE_COMPLETED`: 序章完成状态
